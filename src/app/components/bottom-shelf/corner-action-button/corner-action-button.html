<svg
  class="actionButton"
  [ngClass]="{ isRight: isRight(), pressed: pressed() }"
  [attr.viewBox]="`0 0 ${viewBoxSize} ${viewBoxSize}`"
  xmlns="http://www.w3.org/2000/svg"
  [style.width.px]="buttonWidthPx()"
  [style.--shadowDistance]="shadowDistancePx()"
  [attr.aria-label]="isRight() ? 'Settings' : 'About Mii'"
  role="button"
>
  <defs>
    <radialGradient
      [id]="`buttonFill-${isRight() ? 'Right' : 'Left'}`"
      gradientUnits="userSpaceOnUse"
      cx="77"
      cy="87"
      r="180"
    >
      <stop offset="0" stop-color="#f1f1f2" />
      <stop offset="0.45" stop-color="#e7e7e9" />
      <stop offset="0.75" stop-color="#dddddf" />
      <stop offset="1" stop-color="#cfcfd3" />
    </radialGradient>

    <radialGradient
      [id]="`innerGradient-${isRight() ? 'Right' : 'Left'}`"
      gradientUnits="userSpaceOnUse"
      cx="127"
      cy="147"
      r="160"
    >
      <stop offset="0" stop-color="rgba(0,0,0,0)" />
      <stop offset="0.45" stop-color="rgba(0,0,0,0.02)" />
      <stop offset="1" stop-color="rgba(0,0,0,0.06)" />
    </radialGradient>

    <radialGradient
      [id]="`outerGradient-${isRight() ? 'Right' : 'Left'}`"
      gradientUnits="userSpaceOnUse"
      [attr.cx]="center"
      [attr.cy]="center"
      [attr.r]="outerRadius"
    >
      <stop offset="0.84" stop-color="rgba(0,0,0,0)" />
      <stop offset="0.94" stop-color="rgba(0,0,0,0.06)" />
      <stop offset="1" stop-color="rgba(0,0,0,0.12)" />
    </radialGradient>

    <clipPath [id]="`circleClip-${isRight() ? 'Right' : 'Left'}`">
      <circle [attr.cx]="center" [attr.cy]="center" [attr.r]="innerRadius" />
    </clipPath>

    <filter [id]="`softBlur-${isRight() ? 'Right' : 'Left'}`" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" />
    </filter>

    <filter [id]="`bigBlur-${isRight() ? 'Right' : 'Left'}`" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="7" />
    </filter>
  </defs>

  <circle
    class="actionButtonCircle"
    [attr.cx]="center"
    [attr.cy]="center"
    [attr.r]="outerRadius"
    [attr.fill]="`url(#buttonFill-${isRight() ? 'Right' : 'Left'})`"
    [attr.stroke-width]="borderWidth"
    pointer-events="visiblePainted"
    (click)="onWiiClick()"
    (pointerdown)="onPointerDown()"
    (pointerup)="onPointerCancel()"
    (pointercancel)="onPointerCancel()"
    (pointerleave)="onPointerCancel()"
  />

  <circle
    [attr.cx]="center"
    [attr.cy]="center"
    [attr.r]="innerRadius"
    [attr.fill]="`url(#innerGradient-${isRight() ? 'Right' : 'Left'})`"
    [attr.clip-path]="`url(#circleClip-${isRight() ? 'Right' : 'Left'})`"
    pointer-events="none"
  />

  <circle
    [attr.cx]="center"
    [attr.cy]="center"
    [attr.r]="innerRadius"
    [attr.fill]="`url(#outerGradient-${isRight() ? 'Right' : 'Left'})`"
    [attr.clip-path]="`url(#circleClip-${isRight() ? 'Right' : 'Left'})`"
    [attr.filter]="`url(#softBlur-${isRight() ? 'Right' : 'Left'})`"
    pointer-events="none"
  />

  <!-- wonky bubble boi 2.0 -->
  <g
    transform="translate(-27, -7) scale(0.29, 0.27)"
    [attr.filter]="`url(#bigBlur-${isRight() ? 'Right' : 'Left'})`"
    pointer-events="none"
  >
    <path
      d="M 609.532043 135.117462 
        C 575.803528 119.974533 539.679565 116.073738 503.476074 113.505135 
        C 469.367950 111.085205 435.761292 116.743904 402.340454 122.929558 
        C 378.321838 127.374992 356.567078 137.710358 335.182404 149.103714 
        C 302.417664 166.560135 275.678436 190.882095 252.925690 219.900452 
        C 239.346573 237.219009 230.247726 257.117676 220.666122 276.685211 
        C 211.725586 294.943512 204.234161 313.904877 199.390945 333.648865 
        C 192.875900 360.208191 189.970673 387.338104 189.355240 414.686035 
        C 189.089081 426.513062 190.533340 438.257935 191.319519 450.031952 
        C 192.951324 474.469696 195.799316 498.714661 202.914276 522.283081 
        C 208.871735 542.017334 219.653397 559.302063 231.174988 576.001099 
        C 240.154312 589.015442 253.557159 596.613464 269.229797 598.509583 
        C 284.871094 600.401855 300.660034 599.330566 315.610870 593.947327 
        C 342.900970 584.121216 369.048553 571.862061 394.324097 557.462769 
        C 439.649200 531.641296 480.226044 499.582489 517.745117 463.768585 
        C 548.437256 434.471344 578.612610 404.503876 605.549683 371.571411 
        C 618.081787 356.250092 631.172241 341.378662 642.773743 325.293365 
        C 662.344482 298.158813 674.236755 267.533325 684.013123 235.900482 
        C 687.123047 225.837677 687.564026 215.585464 685.957642 205.302002 
        C 683.699158 190.844696 675.559875 179.470444 665.545898 169.442383 
        C 649.857544 153.731964 630.911987 143.122192 609.532043 135.117462 
        Z"
      fill="white"
      opacity="0.27"
    />
  </g>

  @if (!isRight()) {
    <text x="50%" y="50%" text-anchor="middle" fill="#999999" pointer-events="none">
      <tspan x="50%" y="38%" font-size="44">About</tspan>
      <tspan x="50%" y="73%" font-size="94">Mii</tspan>
    </text>
  } @else {
    <g [attr.transform]="`translate(${-settingsCogSize / 2},${-settingsCogSize / 2})`">
      <image
        class="settingsCog"
        x="50%"
        y="50%"
        [attr.width]="settingsCogSize"
        [attr.height]="settingsCogSize"
        [attr.href]="'assets/settingsCog.svg'"
        pointer-events="none"
        [style.animation-delay.ms]="displayService.introTotalTime()"
      />
    </g>
  }
</svg>
