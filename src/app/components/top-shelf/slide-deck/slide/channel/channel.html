<svg
  class="channel"
  [class.inactive]="isInactiveSlide"
  [class.intro]="isIntroSlide"
  viewBox="0 0 1000 550"
  xmlns="http://www.w3.org/2000/svg"
  [style.animation-delay.ms]="introDelay"
>
  @if (!isInactiveSlide) {
    <title [textContent]="channel.title"></title>
  }

  <defs>
    <path
      id="channelPath"
      d="M 0 275
          C 5 -20 -20 5 275 0
          L 275 0 725 0
          C 1020 5 995 -20 1000 275 995 570 1020 545 725 550
          L 725 550 275 550
          C -20 545 5 570 0 275 5 -20 -20 5 275 0
        "
    />

    <clipPath id="insideChannelOnly">
      <use href="#channelPath" />
    </clipPath>

    @if (isImgPreview(channel.preview)) {
      <pattern
        [attr.id]="channel.id"
        patternUnits="userSpaceOnUse"
        width="1000"
        height="550"
      >
        <image
          x="0"
          y="0"
          width="1000"
          height="550"
          [attr.href]="resolvedImg"
          [attr.preserveAspectRatio]="resolvedPreserveAspectRatio"
        />
      </pattern>
    }
  </defs>

  @if (channel.url && !isInactiveSlide && !isIntroSlide) {
    <a [attr.href]="channel.url" target="_blank" rel="noreferrer">
      <use
        class="channelBorder"
        href="#channelPath"
        stroke-width="24"
        clip-path="url(#insideChannelOnly)"
        [attr.fill]="resolvedBackgroundFill"
      />
    </a>
  } @else {
    <use
      class="channelBorder"
      [ngClass]="{ isIntroSlide }"
      href="#channelPath"
      stroke-width="24"
      clip-path="url(#insideChannelOnly)"
      [attr.fill]="resolvedBackgroundFill"
      [style.--borderColor]="isIntroSlide ? 'black' : ''"
    />
  }

  @if (isSvgPreview(channel.preview)) {
    <image
      x="50%"
      y="50%"
      [attr.width]="300 * resolvedSvgScale"
      [attr.height]="300 * resolvedSvgScale"
      [attr.transform]="
        `translate(${-150 * resolvedSvgScale},${-150 * resolvedSvgScale})`
      "
      [attr.href]="resolvedSvg"
    />
  }

  @if (isTextPreview(channel.preview)) {
    <text
      x="50%"
      y="50%"
      text-anchor="middle"
      dominant-baseline="central"
      [attr.fill]="resolvedTextColor"
      [textContent]="resolvedText"
    />
  }
</svg>
